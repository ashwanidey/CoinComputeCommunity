(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6308],{78671:function(n,t,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/topics/[topic]/[tab]",function(){return e(53377)}])},53377:function(n,t,e){"use strict";e.r(t),e.d(t,{TOPICS_BODY_SX:function(){return _n},__N_SSP:function(){return bn},default:function(){return wn}});var i=e(67557),o=e(52322),r=e(2784),a=e(96664),s=e(38789),l=e(68434),c=e(7279),d=e(8290),u=e(97729),p=e.n(u),v=e(5632),m=e(87612),f=e(55790),h=e(52467),x=e(2558),g=e(62230),y=e(85244),Z=e(73608),T=e(25084),b=e(43078),_=e(20025),j=e(6376),w=e(10019),E=e(39),P=e(98240),N=e(82066),S=e(15798),I=e.n(S),C=e(78225),L=e(38825),k=function(n){return(0,C.zh)({baseURL:"".concat(I().env.endpoints.javaApi,"/gravity"),url:"/v3/gravity/topic/related-trending",method:"POST",data:n}).then((function(n){return function(n){var t=n.hashTagsAndCryptos,e=(0,P.Z)(n,["hashTagsAndCryptos"])||{};if((0,c.Z)(n))return e;var i=null===t||void 0===t?void 0:t.trendingList;if(!(0,c.Z)(i)){var o=i.find((function(n){return"hash-tag"===n.type})),r=i.find((function(n){return"crypto"===n.type}));if(!(0,c.Z)(null===o||void 0===o?void 0:o.detailList)){var a=o||{},s=a.detailList,l=void 0===s?[]:s,d=(0,P.Z)(a,["detailList"]);e.hashTags=l.map((function(n){return(0,g.Z)({},n,d)}))}if(!(0,c.Z)(null===r||void 0===r?void 0:r.detailList)){var u=r||{},p=u.detailList,v=void 0===p?[]:p,m=(0,P.Z)(u,["detailList"]);e.tokens=v.map((function(n){return(0,g.Z)({},n,m)}))}}return e}(n.data.data)}))},O=function(n){return["topic","trending",n]},q=function(n,t){var e=n.topic,i=O(e);return(0,N.useQuery)(i,(function(){return k({topicName:e})}),(0,g.Z)({enabled:!!e},t))},A=function(n,t){L.Z.setQueryData(O(n),(function(n){var e=((null===n||void 0===n?void 0:n.lives)||[]).map((function(n){return(null===n||void 0===n?void 0:n.gravityId)===t?(0,y.Z)((0,g.Z)({},n),{live:(0,y.Z)((0,g.Z)({},n.live),{hasSetReminder:!0})}):n}));return(0,y.Z)((0,g.Z)({},n),{lives:e})}))},M=e(75872),R=e(17980),U=e(15013),z=new Map,D=function(n){var t=n.topic;return["timeline","post","currency",n.tab,t]},F={status:U.b3.DELETE},J=function(n,t){var e=n.topic,i=D({topic:e,tab:E.J.TOP}),o={topic:e,limit:10};return(0,N.useInfiniteQuery)(i,(function(n){var t=n.pageParam;return function(n){var t=(0,R.L)();return(0,C.zh)({baseURL:"".concat(I().env.endpoints.javaApi,"/gravity"),url:"/v3/gravity/topic-detail/top/query",method:"POST",data:(0,g.Z)({experiment:t},n)})}((0,y.Z)((0,g.Z)({},o),{lastScore:null===t||void 0===t?void 0:t.lastScore,lastType:null===t||void 0===t?void 0:t.lastType})).then((function(n){var t,i=null===(t=n.data)||void 0===t?void 0:t.data;return z.set(e,{lastScore:null===i||void 0===i?void 0:i.lastScore,lastType:null===i||void 0===i?void 0:i.lastType}),(0,c.Z)(null===i||void 0===i?void 0:i.tweetDTOList)&&((null===i||void 0===i?void 0:i.lastType)||(null===i||void 0===i?void 0:i.lastScore))?[F]:(0,M.s)(null===i||void 0===i?void 0:i.tweetDTOList,null,{lastScore:null===i||void 0===i?void 0:i.lastScore,lastType:null===i||void 0===i?void 0:i.lastType})})).catch((function(){return[]}))}),(0,g.Z)({getNextPageParam:function(){var n=z.get(e);if((null===n||void 0===n?void 0:n.lastType)||(null===n||void 0===n?void 0:n.lastScore))return{lastScore:null===n||void 0===n?void 0:n.lastScore,lastType:null===n||void 0===n?void 0:n.lastType}}},t))},B=function(n,t){var e=n.topic,i=D({topic:e,tab:E.J.LATEST});return(0,N.useInfiniteQuery)(i,(function(n){var t,i=n.pageParam;return t={topic:e,limit:10,lastScore:i},(0,C.zh)({baseURL:"".concat(I().env.endpoints.javaApi,"/gravity"),url:"/v3/gravity/topic-detail/latest/query",method:"POST",data:t}).then((function(n){var t,e,i=n.data;return null===(t=i.data)||void 0===t||null===(e=t.tweetDTOList)||void 0===e?void 0:e.map((function(n){var t;return(0,y.Z)((0,g.Z)({},n),{lastScore:null===(t=i.data)||void 0===t?void 0:t.lastScore})}))})).catch((function(){return[]}))}),(0,g.Z)({getNextPageParam:function(n){var t=n[n.length-1];return null===t||void 0===t?void 0:t.lastScore}},t))},G=function(n,t){var e,o=J({topic:n},{enabled:t===E.J.TOP}),r=B({topic:n},{enabled:t===E.J.LATEST}),a=function(n){var t=n.topic,e=D({topic:t,tab:E.J.TIMELINE});return(0,N.useInfiniteQuery)(e,(function(n){return n.pageParam,k({topicName:t}).then((function(n){return n.topicTimelineEvents||[]}))}),{getNextPageParam:function(n){}})}({topic:n});return(e={},(0,i.Z)(e,E.J.TOP,o),(0,i.Z)(e,E.J.LATEST,r),(0,i.Z)(e,E.J.TIMELINE,a),e)[t]};var Q=function(){var n,t,e,i=(0,v.useRouter)(),a=null===(n=i.query)||void 0===n?void 0:n.tab,s=null===i||void 0===i||null===(t=i.query)||void 0===t?void 0:t.topic,l=null===(e=i.query)||void 0===e?void 0:e.entry,c=Array.isArray(l)?l[0]:l,d=Boolean((0,j.DC)(c)),u=(0,b.Z)({gravityId:c},{enabled:d},!0).data,p=G(s,a),m=q({topic:s}).data,f=(0,r.useRef)(!1),h=(0,r.useMemo)((function(){return!u||f.current||a!==E.J.TOP?p:u?(f.current=!0,(0,y.Z)((0,g.Z)({},p),{data:(0,j.q2)(p.data,u)})):void 0}),[p,u,a]),P=(0,_.jB)().recordPostImpressionInList;return(0,o.jsx)(w.Z,{onChangeTab:function(n){i.replace({pathname:i.pathname,query:(0,g.Z)({tab:n,topic:s},l?{entry:l}:null)},void 0,{shallow:!0}),T.ZP.sendEvent({category:"Gravity",action:"Community_TopicFeed_SwitchTab",json_data:{topic:s,tab:n}})},token:s,queryData:h,trendingData:m,transferTrendingProps:function(n){if(n===x._.LIVE)return{update:function(n){A(s,n)}}},onItemIntersect:function(n){T.ZP.sendEvent({category:"Post impression",action:"CommunityFeeds_Post_Impression",json_data:(0,y.Z)((0,g.Z)({},n),{enter_from:Z.uQ.Topic,topic:s})}),n.post_id&&P(n.post_id)},site:Z.uQ.Topic,gtmProps:{topic:s}})},V=e(78239),K=e(941),W=e(83475),X=e(95054),$=e(96185),H=e(50690),Y=e(76491),nn=e(46924),tn=e(83434),en=e(34948),on=e(72779),rn=e.n(on),an=e(25453),sn=e(75190),ln=e(66582),cn=e(82740);function dn(){var n=(0,sn.Z)(["\n  position: relative;\n  color: ",";\n  height: fit-content;\n  &.ellipse {\n    display: -webkit-box;\n    -webkit-box-orient: vertical;\n    -webkit-line-clamp: 4;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    overflow-wrap: anywhere;\n    height: ","px;\n  }\n  .more-icon {\n    position: absolute;\n    right: 0;\n    bottom: 0;\n    width: 5em;\n    line-height: 1.5;\n    color: #657180;\n    cursor: pointer;\n    padding-left: 1em;\n    box-sizing: unset;\n    background-image: linear-gradient(\n      to right,\n      transparent 0%,\n      "," 1em,\n      ","\n    );\n    .read-all {\n      color: ",";\n      margin-left: 4px;\n    }\n  }\n"]);return dn=function(){return n},n}var un=ln.tq?105:84,pn=(0,cn.ZP)(l.Z).withConfig({componentId:"sc-fc9652f-0"})(dn(),s.colorTextSecondary,un,s.colorBackground1,s.colorBackground1,s.colorBlue),vn=function(n){var t=n.description,e=(0,an.$G)().t,i=(0,r.useState)(!1),a=i[0],s=i[1],c=(0,r.useCallback)((function(n){null!==n&&n&&n.scrollHeight>un&&s(!0)}),[]);if(!t)return null;return(0,o.jsxs)(pn,{ref:c,className:rn()("topic-description-box",{ellipse:a}),children:[(0,o.jsx)(tn.Z,{className:"desc",textType:"body-md",as:"p",children:t}),a&&(0,o.jsxs)(l.Z,{className:"more-icon",onClick:function(){s(!1)},children:[(0,o.jsx)(tn.Z,{children:"..."}),(0,o.jsx)(tn.Z,{className:"read-all",textType:"body-md",children:e("Read all",{ns:"gravity-post"})})]})]})};function mn(){var n=(0,sn.Z)(["\n  .img-box {\n    flex-shrink: 0;\n    overflow: hidden;\n    background-color: ",";\n    border-radius: ",";\n    > img {\n      width: 100%;\n      height: 100%;\n      opacity: 1;\n    }\n  }\n  .title-box {\n    overflow: hidden;\n    .title {\n      display: inline;\n      line-height: 32px;\n      overflow-wrap: anywhere;\n    }\n    .topic-tag {\n      margin-left: 4px;\n      height: 32px;\n      display: inline-flex;\n      align-items: center;\n      vertical-align: bottom;\n    }\n  }\n"]);return mn=function(){return n},n}function fn(){var n=(0,sn.Z)(["\n  display: flex;\n  column-gap: 20px;\n  padding-bottom: 24px;\n  border-bottom: 1px solid ",";\n  .img-box {\n    width: 140px;\n    height: 140px;\n  }\n  .main-box {\n    flex: 1;\n    display: flex;\n    flex-direction: column;\n  }\n  .header {\n    display: flex;\n    column-gap: 12px;\n    .title-box {\n      flex: 1;\n      width: 0;\n    }\n  }\n  .main {\n    display: flex;\n    column-gap: 12px;\n    margin-top: 20px;\n    &:empty {\n      margin-top: 0;\n    }\n  }\n  "," {\n    .header {\n      flex-direction: column;\n      row-gap: 12px;\n      .title-box {\n        flex: 1;\n        width: 100%;\n      }\n    }\n  }\n"]);return fn=function(){return n},n}function hn(){var n=(0,sn.Z)(["\n  display: block;\n  padding-bottom: 16px;\n  .title-box {\n    margin-bottom: 8px;\n  }\n  .main {\n    display: flex;\n    column-gap: 12px;\n    margin-bottom: 16px;\n  }\n  .img-box {\n    width: ","px;\n    height: ","px;\n  }\n  .btn-group {\n    display: flex;\n    align-items: center;\n    gap: 12px;\n  }\n"]);return hn=function(){return n},n}var xn,gn=(0,cn.ZP)(l.Z).withConfig({componentId:"sc-75c8fc5c-0"})(mn(),s.colorGray200,s.borderRadius100),yn=cn.ZP.div.withConfig({componentId:"sc-75c8fc5c-1"})(fn(),s.colorGray200,a[s.mqMd].down),Zn=cn.ZP.div.withConfig({componentId:"sc-75c8fc5c-2"})(hn(),un,un),Tn=function(n){var t=n.topic,e=(0,v.useRouter)().query,i=q({topic:e.topic}).data,a=(0,d.$G)().t,s=(0,nn.bd)().deviceInfo.isMobile,c=(0,r.useState)(!1),u=c[0],p=c[1],h=(0,m.Eu)(),x=h.userInfo,g=h.invokeLogin,y=(0,r.useMemo)((function(){return(0,f.Z)((function(){return null===i||void 0===i?void 0:i.topic}),{})}),[i]),Z=null===y||void 0===y?void 0:y.tag,b=function(){T.ZP.sendEvent({category:"Gravity",action:"Community_ClickPostEntrance",json_data:{enter_from:"topic_feed_header"}}),x?p(!0):g()},_=s?Zn:yn;return(0,o.jsxs)(gn,{children:[(0,o.jsx)(_,{children:function(){var n=function(){var n="heading-xl",e=t.endsWith("#");return(0,o.jsxs)(l.Z,{className:"title-box",children:[(0,o.jsx)(tn.Z,{textType:n,as:"span",style:{display:"inline"},children:"#"}),(0,o.jsx)(tn.Z,{textType:n,className:"title",as:"h1",children:t.replace(/#/g,"")}),e&&(0,o.jsx)(tn.Z,{textType:n,as:"span",style:{display:"inline"},children:"#"}),(0,o.jsx)(H.z,{tag:Z})]})};return s?(0,o.jsxs)(o.Fragment,{children:[n(),((null===y||void 0===y?void 0:y.image)||(null===y||void 0===y?void 0:y.description))&&(0,o.jsxs)(l.Z,{className:"main",children:[(null===y||void 0===y?void 0:y.image)&&(0,o.jsx)(l.Z,{className:"img-box",children:(0,o.jsx)(K.Z,{src:null===y||void 0===y?void 0:y.image})}),(0,o.jsx)(vn,{description:null===y||void 0===y?void 0:y.description})]}),(0,o.jsxs)(l.Z,{className:"btn-group",children:[(0,o.jsx)(W.ZP,{iconComp:(0,o.jsx)(Y.Z,{fontSize:16}),buttonSize:"sm",className:"post-button",onClick:b,fullwidth:!0,children:a("Post",{ns:"community-editor"})}),(0,o.jsx)(en.Z,{url:S.isServer?"":window.location.href,children:(0,o.jsx)(W.ZP,{variant:"tertiary",buttonSize:"sm",iconComp:(0,o.jsx)(X.Z,{}),fullwidth:!0,children:a("Share",{ns:"gravity"})})})]})]}):(0,o.jsxs)(o.Fragment,{children:[(null===y||void 0===y?void 0:y.image)&&(0,o.jsx)(l.Z,{className:"img-box",children:(0,o.jsx)(K.Z,{src:null===y||void 0===y?void 0:y.image})}),(0,o.jsxs)(l.Z,{className:"main-box",children:[(0,o.jsxs)(l.Z,{className:"header",children:[n(),(0,o.jsx)(W.ZP,{iconComp:(0,o.jsx)(Y.Z,{fontSize:16}),buttonSize:"sm",className:"post-button",onClick:b,children:a("Post",{ns:"community-editor"})}),(0,o.jsx)(l.Z,{children:(0,o.jsx)(en.Z,{url:S.isServer?"":window.location.href,children:(0,o.jsx)(W.ZP,{variant:"tertiary",buttonSize:"sm",iconComp:(0,o.jsx)(X.Z,{})})})})]}),(0,o.jsx)(l.Z,{className:"main",children:(0,o.jsx)(vn,{description:null===y||void 0===y?void 0:y.description})})]})]})}()}),(0,o.jsx)($.Z,{isOpen:u,onClose:function(){return p(!1)},referSite:"topic_feed_header"})]})},bn=!0,_n=(xn={},(0,i.Z)(xn,a[s.mqMd].up,{padding:s.space400}),(0,i.Z)(xn,a[s.mqMd].down,{padding:s.space200,paddingTop:0}),xn),jn=function(n){var t=(0,v.useRouter)().query,e=t.topic,i=(0,f.Z)((function(){return(null===e||void 0===e?void 0:e.startsWith("#"))?e:"#".concat(e)}),""),r=i.replace(/#/g,""),a=q({topic:t.topic}).data,s=(0,f.Z)((function(){return null===a||void 0===a?void 0:a.topic}),{}),c=i.endsWith("#"),d=c?"".concat(r," - Latest News"):"Latest ".concat(r," News And Message Board | CoinMarketCap"),u=c?"Read the latest news and our message board dedicated to: ".concat(r,". Real-time updated feed."):"Follow the latest news, updates and gossip on our ".concat(r," message board. ").concat(r," news articles. Project updates. Memes. And much more."),m=(null===s||void 0===s?void 0:s.description)||u;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(p(),{children:[(0,o.jsx)("title",{children:d}),(0,o.jsx)("meta",{name:"description",content:m})]}),(0,o.jsxs)(l.Z,{className:"topics-body",sx:_n,children:[(0,o.jsx)(Tn,{topic:i}),(0,o.jsx)(Q,{})]})]})};jn.LayoutComponent=function(n){var t=n.children,e=(0,v.useRouter)().query,i=(0,d.$G)().t,a=q({topic:e.topic}),s=a.data,l=a.refetch,u=s||{},p=u.lives,f=u.hashTags,g=u.tokens,y=u.accounts,Z=u.topic,T=u.topicTimelineEvents,b=(0,m.Eu)().userInfo,_=(Z||{}).usefulLinks;(0,r.useEffect)((function(){l()}),[null===b||void 0===b?void 0:b.id]);var j=[];return T&&!(0,c.Z)(T)&&j.push({key:x._.TOPIC_TIMELINE_EVENTS,component:(0,o.jsx)(h.Z,{type:x._.TOPIC_TIMELINE_EVENTS,data:T,title:i("Timeline",{ns:"gravity"})},x._.TOPIC_TIMELINE_EVENTS)}),_&&!(0,c.Z)(_)&&j.push({key:x._.USEFUL_LINK,component:(0,o.jsx)(h.Z,{type:x._.USEFUL_LINK,data:_,title:i("Useful Links",{ns:"gravity"})},x._.USEFUL_LINK)}),p&&!(0,c.Z)(p)&&j.push({key:x._.LIVE,component:(0,o.jsx)(h.Z,{type:x._.LIVE,data:p,title:i("Related Events",{ns:"gravity"}),update:function(n){A(e.topic,n)}},x._.LIVE)}),y&&!(0,c.Z)(y)&&j.push({key:x._.ACCOUNT,component:(0,o.jsx)(h.Z,{type:x._.ACCOUNT,data:y,title:i("Related People",{ns:"gravity"})},x._.ACCOUNT)}),(0,c.Z)(f)||j.push({key:x._.TOPIC,component:(0,o.jsx)(h.Z,{type:x._.TOPIC,data:f},x._.TOPIC)}),(0,c.Z)(g)||j.push({key:x._.TOKEN,component:(0,o.jsx)(h.Z,{type:x._.TOKEN,data:g},x._.TOKEN)}),(0,o.jsx)(V.Z,{sideContent:(0,c.Z)(j)?void 0:j,children:t})};var wn=jn}},function(n){var t=function(t){return n(n.s=t)};n.O(0,[8307,2871,9680,2054,9491,4091,8259,1393,9774,2888,179],(function(){return t(412),t(78671)}));var e=n.O();_N_E=e}]);