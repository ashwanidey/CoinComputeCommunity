(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8769,9309],{35242:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/notifications",function(){return t(92715)}])},99389:function(n,e,t){"use strict";var i=t(62230),o=t(85244),r=t(98240),a=t(75190),s=t(52322),c=t(82740),u=t(38789),d=t(71701),l=t(37881),f=t(87681),x=t(83081);function p(){var n=(0,a.Z)(["\n  cursor: pointer;\n  > .caret {\n    ","\n  }\n"]);return p=function(){return n},n}function v(){var n=(0,a.Z)(["\n        ","\n      "]);return v=function(){return n},n}var h=(0,c.ZP)(l.ZP).withConfig({componentId:"sc-a92cbac-0"})(p(),f.J1),m=(0,c.ZP)(h).withConfig({componentId:"sc-a92cbac-1"})(v(),f.P3);e.Z=function(n){var e=n.text,t=n.className,a=(0,r.Z)(n,["text","className"]);return(0,s.jsxs)(m,(0,o.Z)((0,i.Z)({as:"h2",paddingX:3,pt:2,fontSize:5,className:"flexBetween "+t||0,onClick:function(){x.ZP.emit(x.Vy.gravityInvokeMobileMenu)}},a),{children:[e,(0,s.jsx)(d.Z,{sx:{color:u.colorGray500}})]}))}},92715:function(n,e,t){"use strict";t.r(e),t.d(e,{__N_SSP:function(){return G}});var i=t(62230),o=t(85244),r=t(75190),a=t(52322),s=t(2784),c=t(82740),u=t(48312),d=t(78320),l=t(81730),f=t(31557),x=t(61210),p=t(5632),v=t(95626),h=t(41888),m=t(72469),g=t(55037),Z=t(56093),y=t(10042),j=t(69309),w=t(63082),C=t(87681),b=t(25084),N=t(43961),k=t(38825),P=t(25453),I=t(99389);function L(){var n=(0,r.Z)(["\n  display: flex;\n  flex-direction: column;\n  position: relative;\n  @media (max-width: ","px) {\n    background: ",";\n  }\n\n  .curType {\n    color: #3861fb;\n    display: inline-flex;\n    align-items: center;\n    gap: 4px;\n    cursor: pointer;\n    ",";\n  }\n"]);return L=function(){return n},n}function _(){var n=(0,r.Z)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 24px 32px;\n  ",";\n  font-size: 24px;\n  font-weight: 700;\n  line-height: 26px;\n"]);return _=function(){return n},n}function R(){var n=(0,r.Z)(["\n  margin: 0 32px;\n  height: 1px;\n  background: var(--color-light-neutral-2);\n  ",";\n"]);return R=function(){return n},n}function E(){var n=(0,r.Z)(["\n  position: relative;\n  padding: 0 32px;\n  min-height: calc(100vh - 220px);\n  ",";\n"]);return E=function(){return n},n}function M(){var n=(0,r.Z)(["\n  position: sticky;\n  z-index: 100;\n  top: 96px;\n  height: 0;\n  display: flex;\n  justify-content: center;\n  button {\n    margin-top: -16px;\n  }\n  svg {\n    margin-right: 12px;\n  }\n  .hidden {\n    opacity: 0;\n    visibility: hidden;\n  }\n"]);return M=function(){return n},n}function z(){var n=(0,r.Z)([void 0,void 0]);return z=function(){return n},n}var T=c.ZP.div.withConfig({componentId:"sc-8b6c890f-0"})(L(),C.AV.XSMALL_MIN,(function(n){return n.theme.isDay?"linear-gradient(180deg, #F8FAFD 0%, rgba(248, 250, 253, 0) 240px)":"none"}),(0,C.CC)("margin:0 0 13px 0;")),F=c.ZP.div.withConfig({componentId:"sc-8b6c890f-1"})(_(),(0,C.CC)("display: none;")),S=(0,c.ZP)(d.Z).withConfig({componentId:"sc-8b6c890f-2"})(R(),(0,C.CC)("margin: 0 16px;")),O=c.ZP.div.withConfig({componentId:"sc-8b6c890f-3"})(E(),(0,C.CC)("padding: 0 16px; min-height: calc(100vh - 241px);")),D=c.ZP.div.withConfig({componentId:"sc-8b6c890f-4"})(M()),q=function(){var n=(0,p.useRouter)().asPath,e=(0,P.$G)().t;return(0,a.jsxs)(d.Z,{display:"flex",alignItems:"center",style:{gap:"10px"},children:[(0,a.jsx)("span",{children:e("Notifications")}),(0,a.jsx)(v.qY,{trackerLabel:n})]})},G=!0;e.default=function(){var n=(0,s.useState)(v.rG.All),e=n[0],t=n[1],r=(0,s.useState)(0),c=r[0],C=r[1],L=(0,P.$G)().t,_=(0,s.useState)(+new Date),R=_[0],E=_[1],M=(0,v._h)({onClick:function(n){b.ZP.sendEvent({category:"Notification",action:"Gravity Notification filter",label:n.label}),t(n)},t:L}),z={notificationType:"gravity",msgType:e.value},G=(0,s.useContext)(w.fL).userInfo,A=(0,p.useRouter)().asPath;(0,s.useEffect)((function(){G||setTimeout((function(){k.Z.removeQueries({predicate:function(n){var e;return null===(e=n.queryKey)||void 0===e?void 0:e.includes("notification")}})}),300)}),[G]);var B=(0,Z.O4)({enabled:!!G}).data;(0,s.useEffect)((function(){if(B){var n=B.gravity;C(n)}}),[B]);var $=(0,Z.t8)(z),Q=$.isLoading,X=$.data,V=$.hasNextPage,Y=$.fetchNextPage,U=$.isFetching,W=$.isFetchingNextPage,H=($.remove,(0,s.useMemo)((function(){return(0,u.Z)(null===X||void 0===X?void 0:X.pages)}),[null===X||void 0===X?void 0:X.pages])),J=(0,s.useMemo)((function(){return H.findIndex((function(n){return R-n.newMsgTime>v.Oy}))}),[R,H]),nn=(0,s.useCallback)((function(n){var e=n.data,t=n.index,i=0!==J&&t===J;return(0,a.jsxs)(a.Fragment,{children:[i?(0,a.jsx)(y.U$,{children:"Earlier"}):null,(0,a.jsx)(g.Z,{data:e})]})}),[J]);(0,s.useEffect)((function(){E(+new Date)}),[e]);var en=!Q&&0===(null===H||void 0===H?void 0:H.length);(0,s.useEffect)((function(){tn(),b.ZP.sendEvent({category:"Gravity",action:"Community_NotificationsPage"})}),[]);var tn=function(){var n=k.Z.getQueryData(Z.dr.unreadCount());n&&n.gravity>0&&(k.Z.setQueryData(Z.dr.unreadCount(),(0,o.Z)((0,i.Z)({},n),{gravity:0})),(0,N.dZ)(Z.r$),k.Z.invalidateQueries({predicate:function(n){var e,t;return(null===(e=n.queryKey)||void 0===e?void 0:e.includes("subscribeMsgs"))&&(null===(t=n.queryKey)||void 0===t?void 0:t.includes("gravity"))}}))};return(0,a.jsxs)(T,{children:[(0,a.jsx)(I.Z,{text:(0,a.jsx)(q,{}),p:"8px 16px 24px"}),(0,a.jsxs)(F,{children:[(0,a.jsx)("span",{children:L("Notifications")}),(0,a.jsx)(v.qY,{trackerLabel:A})]}),(0,a.jsx)(K,{children:(0,a.jsx)(S,{})}),(0,a.jsx)(d.Z,{display:"flex",justifyContent:["flex-start","flex-end"],px:["16px","32px"],pt:["0","20px"],children:(0,a.jsx)(f.Z,{placement:"bottom-end",arrow:!1,interactive:!1,options:M,selected:L(e.label),children:(0,a.jsxs)("span",{className:"curType",children:[(0,a.jsx)("span",{children:L(e.label)}),(0,a.jsx)(x.Z,{size:"16px"})]})})}),(0,a.jsx)(D,{sticky:!0,children:(0,a.jsxs)(l.ZP,{className:"refresh-btn show ".concat(c>0?"show":"hidden"),rounded:!0,variant:"primary",size:"sm",onClick:function(){C(0),tn(),t(v.rG.All)},children:[(0,a.jsx)(m.Du,{}),(0,a.jsxs)("span",{children:[c>=v.zO?"".concat(v.zO,"+"):c,L(c>1?"New Notifications":"New Notification")]})]})}),(0,a.jsx)(O,{children:U&&!W?(0,a.jsx)(v.NF,{}):en?(0,a.jsx)(h.Z,{width:"329px",mx:"auto",pt:"200px"}):(0,a.jsx)(j.default,{data:H,isLoading:Q||void 0===X,onReachBottom:Y,itemRender:nn,endComponent:(0,a.jsx)(v.$K,{}),loadingComp:(0,a.jsx)(v.NF,{}),hasNextPage:V,keyField:"id",scrollKey:"notification"})})]})};var K=(0,c.ZP)(d.Z).withConfig({componentId:"sc-8b6c890f-5"})(z(),C.sw)},69309:function(n,e,t){"use strict";t.r(e);var i=t(52322),o=t(40610),r=t(2784),a=t(15925),s=t(70698),c=t(6583),u=t(90399),d=function(){return 50},l=(0,i.jsx)(a.Z,{size:"lg"}),f=(0,i.jsx)("div",{children:"Loading"}),x=r.forwardRef((function(n,e){var t=n.data,a=n.itemRender,x=n.estimateSize,p=void 0===x?d:x,v=n.hasNextPage,h=void 0!==v&&v,m=n.onReachBottom,g=n.isLoading,Z=void 0!==g&&g,y=n.loadingComp,j=void 0===y?f:y,w=n.endComponent,C=void 0===w?null:w,b=n.placeholder,N=void 0===b?l:b,k=n.keyField,P=void 0===k?"id":k,I=n.overscan,L=void 0===I?2:I,_=n.emptyComponent,R=n.onItemIntersect,E=n.intersectionOptions,M=n.enableLoadMore,z=void 0===M||M,T=n.scrollKey,F=r.useRef(null),S=(0,o.oq)({size:t.length+1,parentRef:F,estimateSize:(0,r.useCallback)((function(n){return T&&window[T]&&window[T][n]||p(n)}),[p,T]),overscan:L,windowRef:r.useRef(window),useScroll:o.b}),O=S.virtualItems.length,D=S.virtualItems[O-1],q=D?D.index:-1;(0,r.useImperativeHandle)(e,(function(){return{scrollTop:function(){S.scrollToIndex(0,{align:"start"}),requestAnimationFrame((function(){window.scrollTo({top:0,left:0,behavior:"smooth"})}))}}})),(0,u.BR)({lastItemIndex:q,items:t,enabled:h&&!Z&&z,onReachBottom:m,bottomOffset:4});var G=(0,r.useMemo)((function(){return a}),[a]),K=(0,s.nf)(R),A=Z&&!t.length,B=!Z&&!t.length&&_,$=!A&&!B;return(0,i.jsx)(c.U,{ref:F,children:(0,i.jsxs)("div",{style:{height:"".concat(S.totalSize,"px"),width:"100%",position:"relative"},children:[A&&N,B&&_,$&&S.virtualItems.map((function(n){var e=n.index>t.length-1,o=t[n.index],a="".concat((null===o||void 0===o?void 0:o[P])||"virtual-item","-").concat(n.index);return(0,i.jsx)(u.x8,{index:n.index,scrollKey:T,measure:n.measureRef,impressionTracking:function(){return K(o,n.index)},intersectionOptions:E,style:{transform:"translateY(".concat(n.start,"px)")},children:e?h?j:C:r.isValidElement(o)?o:(0,i.jsx)(G,{data:o,index:n.index})},a)}))]})})}));e.default=x},71701:function(n,e,t){"use strict";var i=t(62230),o=t(85244),r=t(98240),a=t(52322),s=t(2784),c=t(92324),u=function(n){var e=n.sx,t=void 0===e?{}:e,s=(0,r.Z)(n,["sx"]);return(0,a.jsx)(c.Z,(0,o.Z)((0,i.Z)({sx:t},s),{iconName:"chevronDown",children:(0,a.jsx)("path",{d:"M12.0001 15.86C11.5601 15.86 11.1401 15.69 10.8301 15.37L5.30007 9.84001C4.91007 9.45001 4.91007 8.82001 5.30007 8.43001C5.69007 8.04001 6.32007 8.04001 6.71007 8.43001L12.0001 13.72L17.2901 8.43001C17.6801 8.04001 18.3101 8.04001 18.7001 8.43001C19.0901 8.82001 19.0901 9.45001 18.7001 9.84001L13.1701 15.37C12.8601 15.68 12.4401 15.86 12.0001 15.86Z",fill:"currentColor"})}))};e.Z=s.memo(u)},83691:function(n,e,t){"use strict";var i=t(62230),o=t(85244),r=t(52322),a=(t(2784),t(69591));e.Z=function(n){return(0,r.jsx)(a.Z,(0,o.Z)((0,i.Z)({fill:"none"},n),{children:(0,r.jsx)("path",{d:"M9 6L15 12L9 18",stroke:"currentColor",strokeWidth:n.strokeWidth||2,strokeMiterlimit:"10",strokeLinecap:"round",strokeLinejoin:"round"})}))}}},function(n){var e=function(e){return n(n.s=e)};n.O(0,[2871,5102,9774,2888,179],(function(){return e(412),e(35242)}));var t=n.O();_N_E=t}]);