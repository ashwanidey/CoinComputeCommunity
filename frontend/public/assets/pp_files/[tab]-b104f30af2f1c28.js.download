(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3321],{65206:function(n,t,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/coins/[slug]/[tab]",function(){return e(67558)}])},67558:function(n,t,e){"use strict";e.r(t),e.d(t,{TOPICS_BODY_SX:function(){return tn},__N_SSP:function(){return nn},default:function(){return on}});var o=e(67557),i=e(52322),r=e(2784),a=e(96664),u=e(38789),s=e(42880),d=e(68434),c=e(7279),l=e(8290),p=e(5632),v=e(55137),f=e(15925),m=e(87612),y=e(52467),_=e(2558),h=e(62230),I=e(85244),g=e(73608),Z=e(25084),b=e(20025),C=e(10019),x=e(81541),P=e(82066),j=e(15798),E=e.n(j),S=e(78225),w=e(38825),N=function(n){return["coins","live",n]},O=function(n,t){var e=N(n);return(0,P.useQuery)(e,(function(){return function(n){return(0,S.zh)({baseURL:"".concat(E().env.endpoints.javaApi,"/live"),url:"v3/live/query-by-status",method:"POST",data:{cryptoId:n}}).then((function(n){var t,e,o,i,r=n.data;return(t=[]).concat.apply(t,(0,x.Z)(null===(e=r.data)||void 0===e?void 0:e.ongoingLives).concat((0,x.Z)(null===(o=r.data)||void 0===o?void 0:o.upcomingLives),(0,x.Z)(null===(i=r.data)||void 0===i?void 0:i.endedLives))).filter(Boolean).slice(0,5)}))}(n)}),(0,h.Z)({enabled:Boolean(!!n)},t))},T=function(n,t){w.Z.setQueryData(N(n),(function(n){return n.map((function(n){return(null===n||void 0===n?void 0:n.gravityId)===t?(0,I.Z)((0,h.Z)({},n),{hasSetReminder:!0}):n}))}))},L=e(23263),k=(e(6376),e(82062)),R=e(11772),q=e(39);function z(n,t){var e=(0,s.p2)(n).cryptoItem,o=null===e||void 0===e?void 0:e.id,i=(0,R.h)({cryptoId:o},{enabled:Boolean(t===q.J.TOP&&o)}),r=function(n,t){var e=n.cryptoId,o=n.slug,i=function(n){return["timeline","post","currency","latest",n.cryptoId]}({cryptoId:e}),r=(0,P.useInfiniteQuery)(i,(function(n){var t=n.pageParam;return(0,L.vU)({cryptoId:e,overView:!1,type:k.$v.ALL,lastScore:t,slug:o})}),(0,h.Z)({getNextPageParam:function(n){var t=n[n.length-1];return null===t||void 0===t?void 0:t.postTime}},t));return r}({cryptoId:o},{enabled:Boolean(t===q.J.LATEST&&o)});return t===q.J.TOP?i:r}var A=function(n){var t,e,o=n.cryptoItem,a=(0,p.useRouter)(),u=null===(t=a.query)||void 0===t?void 0:t.tab,s=null===(e=a.query)||void 0===e?void 0:e.slug,d=(0,m.Eu)().userInfo,c=z(s,u),l=O(null===o||void 0===o?void 0:o.id),f=l.data,y=l.refetch,x=(0,v.H7)(null===o||void 0===o?void 0:o.id).data,P=(0,b.jB)().recordPostImpressionInList;(0,r.useEffect)((function(){s&&f&&y()}),[null===d||void 0===d?void 0:d.id]);var j=(0,r.useMemo)((function(){return{coinLives:f,coinInfo:o,announcement:x}}),[f,o,x]);return(0,i.jsx)(C.Z,{onChangeTab:function(n){a.replace({pathname:a.pathname,query:{tab:n,slug:s}},void 0,{shallow:!0}),Z.ZP.sendEvent({category:"Gravity",action:"Community_CoinFeed_SwitchTab",json_data:{slug:s,tab:n}})},token:s,queryData:c,trendingData:j,onItemIntersect:function(n){Z.ZP.sendEvent({category:"Post impression",action:"CommunityFeeds_Post_Impression",json_data:(0,I.Z)((0,h.Z)({},n),{enter_from:g.uQ.Coin,slug:s})}),P(n.post_id)},transferTrendingProps:function(n){if(n===_._.COIN_LIVE)return{update:function(n){T(null===o||void 0===o?void 0:o.id,n)}}},site:g.uQ.Coin,gtmProps:{crypto_id:null===o||void 0===o?void 0:o.id}})},B=e(78239),J=e(83434),G=e(83475),M=e(95054),Q=e(96185),U=e(76491),V=e(46924),$=e(25453),D=e(34948),H=e(75190);function X(){var n=(0,H.Z)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  gap: ",";\n  padding-bottom: ",";\n  border-bottom: 1px solid ",";\n  "," {\n    display: block;\n    padding-bottom: ",";\n    .btn-group {\n      margin-top: ",";\n    }\n  }\n  .btn-group {\n    display: flex;\n    gap: ",";\n  }\n"]);return X=function(){return n},n}var F=e(82740).ZP.div.withConfig({componentId:"sc-871391a4-0"})(X(),u.space150,u.space300,u.colorGray200,[a[u.mqMd].down],u.space200,u.space200,u.space150),W={wordBreak:"break-all",hyphens:"auto",lineHeight:"32px"};var Y,K=function(n){var t=n.cryptoItem,e=(t||{}).symbol,o=Array.isArray(e)?null===e||void 0===e?void 0:e[0]:e,a=(null===o||void 0===o?void 0:o.startsWith("$"))?null===o||void 0===o?void 0:o.slice(1):o,u="$".concat(a),s=(0,$.$G)().t,c=(0,r.useState)(!1),l=c[0],p=c[1],v=(0,m.Eu)(),f=v.userInfo,y=v.invokeLogin,_=(0,V.bd)().deviceInfo.isMobile,h=function(){(0,Z.nS)({category:"Gravity",action:"Community_ClickPostEntrance",json_data:{enter_from:"coin_feed_header"}}),f?p(!0):y()};return e?(0,i.jsxs)(F,{children:[(0,i.jsx)(J.Z,{textType:"heading-xl",sx:W,children:u}),_?(0,i.jsxs)(d.Z,{className:"btn-group",children:[(0,i.jsx)(G.ZP,{iconComp:(0,i.jsx)(U.Z,{fontSize:16}),buttonSize:"sm",className:"post-button",onClick:h,fullwidth:!0,children:s("Post",{ns:"community-editor"})}),(0,i.jsx)(D.Z,{url:j.isServer?"":window.location.href,children:(0,i.jsx)(G.ZP,{variant:"tertiary",buttonSize:"sm",iconComp:(0,i.jsx)(M.Z,{}),fullwidth:!0,children:s("Share",{ns:"gravity"})})})]}):(0,i.jsxs)(d.Z,{className:"btn-group",children:[(0,i.jsx)(G.ZP,{iconComp:(0,i.jsx)(U.Z,{fontSize:16}),buttonSize:"sm",className:"post-button",onClick:h,children:s("Post",{ns:"community-editor"})}),(0,i.jsx)(D.Z,{url:j.isServer?"":window.location.href,children:(0,i.jsx)(G.ZP,{variant:"tertiary",buttonSize:"sm",iconComp:(0,i.jsx)(M.Z,{})})})]}),(0,i.jsx)(Q.Z,{isOpen:l,onClose:function(){return p(!1)},referSite:"coin_feed_header",cryptoItem:t})]}):null},nn=!0,tn=(Y={},(0,o.Z)(Y,a[u.mqMd].up,{padding:u.space400}),(0,o.Z)(Y,a[u.mqMd].down,{padding:u.space200,paddingTop:0}),Y),en=function(n){var t,e=(0,p.useRouter)(),o=null===e||void 0===e||null===(t=e.query)||void 0===t?void 0:t.slug,r=(0,s.p2)(o),a=r.cryptoItem,u=r.isLoading;return(0,i.jsxs)(d.Z,{className:"topics-body",sx:tn,children:[(0,i.jsx)(K,{cryptoItem:a}),u?(0,i.jsx)(f.Z,{}):(0,i.jsx)(A,{cryptoItem:a})]})};en.LayoutComponent=function(n){var t=n.children,e=n.isInApp,o=(0,p.useRouter)().query,a=null===o||void 0===o?void 0:o.slug,u=(0,l.$G)().t,d=(0,m.Eu)().userInfo,f=(0,s.p2)(a).cryptoItem,h=O(null===f||void 0===f?void 0:f.id),I=h.data,g=h.refetch,Z=(0,v.H7)(null===f||void 0===f?void 0:f.id).data;(0,r.useEffect)((function(){a&&I&&g()}),[null===d||void 0===d?void 0:d.id]);var b=[];return f&&b.push({key:_._.COIN_PRICE,component:(0,i.jsx)(y.Z,{type:_._.COIN_PRICE,data:f},_._.COIN_PRICE)}),Z&&b.push({key:_._.PROJECT_USER,component:(0,i.jsx)(y.Z,{type:_._.PROJECT_USER,data:Z},_._.PROJECT_USER)}),I&&!(0,c.Z)(I)&&b.push({key:_._.COIN_LIVE,component:(0,i.jsx)(y.Z,{type:_._.COIN_LIVE,data:I,title:u("Related Events",{ns:"gravity"}),update:function(n){T(null===f||void 0===f?void 0:f.id,n)}},_._.COIN_LIVE)}),(0,i.jsx)(B.Z,{sideContent:(0,c.Z)(b)?void 0:b,isInApp:e,children:t})};var on=en}},function(n){var t=function(t){return n(n.s=t)};n.O(0,[8307,2871,9680,2054,9491,4091,8259,1393,9774,2888,179],(function(){return t(412),t(65206)}));var e=n.O();_N_E=e}]);