"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9250],{70418:function(n,t,e){var r=e(62230),o=e(98240),i=e(75190),c=e(52322),a=e(2784),u=e(82740),s=e(78320),l=e(5632),d=e(44148),f=e(80965),p=e(63082),h=e(73608);function v(){var n=(0,i.Z)(["\n  cursor: pointer;\n"]);return v=function(){return n},n}var g=a.lazy((function(){return e.e(884).then(e.bind(e,25716))})),x=(0,u.ZP)(s.Z).withConfig({componentId:"sc-74771847-0"})(v());t.Z=function(n){var t=n.data,e=n.wrapperStyle,i=void 0===e?{}:e,u=n.site,s=n.gtmProps,v=void 0===s?{}:s,y=(0,o.Z)(n,["data","wrapperStyle","site","gtmProps"]),m=(0,l.useRouter)(),C=(0,a.useContext)(p.fL),Z=C.userInfo,w=C.invokeLogin,k=(0,a.useState)(!1),j=k[0],b=k[1];return(0,c.jsx)(h.ZP,{site:u,gtmProps:v,children:(0,c.jsxs)(x,{onClick:function(n){var e=document.getSelection();"Range"!==(null===e||void 0===e?void 0:e.type)&&m&&m.push("/post/".concat(t.gravityId,"/"))},style:i,className:"post-with-reply",children:[(0,c.jsx)(d.C,(0,r.Z)({data:t,onComment:function(n){Z?b(!0):w()},showFollowOption:!0},y)),j&&(0,c.jsx)(a.Suspense,{fallback:(0,c.jsx)(f.Z,{}),children:(0,c.jsx)(g,{data:t,isOpen:j,onClose:function(){return b(!1)}})})]},null===t||void 0===t?void 0:t.gravityId)})}},44378:function(n,t,e){e.d(t,{Z:function(){return k}});var r=e(22710),o=e(5163),i=e(52322),c=e(2784),a=e(81730),u=e(35923),s=e(43560),l=e(87612),d=e(63082),f=e(25084),p=e(83409),h=e(25453),v=e(96870),g=e(35531),x=e(75190),y=e(82740);function m(){var n=(0,x.Z)(["\n  position: fixed;\n  left: 0;\n  top: 0;\n  z-index: 20;\n  width: 100%;\n  display: flex;\n  align-items: center;\n  height: 60px;\n  padding: 4px;\n  box-shadow: 0px 1px 2px rgba(128, 138, 157, 0.08), 0px 8px 32px rgba(128, 138, 157, 0.12);\n  background-color: var(--c-color-background-2);\n  & > div:first-child {\n    flex: 1;\n  }\n"]);return m=function(){return n},n}function C(){var n=(0,x.Z)(["\n  background-color: var(--c-color-background-2);\n  input {\n    font-size: 16px;\n  }\n"]);return C=function(){return n},n}var Z=y.ZP.div.withConfig({componentId:"sc-82d1b654-0"})(m()),w=y.ZP.div.withConfig({componentId:"sc-82d1b654-1"})(C()),k=function(n){var t=n.defaultValue,e=void 0===t?"":t,x=n.onSearch,y=void 0===x?function(n,t){}:x,m=(0,h.$G)().t,C=(0,c.useContext)(l.gX).userInfo,k=(0,c.useState)(e),j=k[0],b=k[1],S=((0,c.useContext)(d.fL).invokeLogin,(0,c.useRef)()),P=(0,c.useState)(!1),I=P[0],N=P[1],T=(0,c.useState)((0,p.H)()),E=T[0],_=T[1],F=(0,c.useState)(!1),L=F[0],R=F[1],z=!j,W=(0,v.O$)(),M=W.querySuggestion,$=W.handleClickSuggestion;v.O$;var G=m("Search posts or users");(0,c.useEffect)((function(){b(e)}),[e]),(0,c.useEffect)((function(){R(!0),M(j,(function(n){_(n),R(!1)}))}),[j]),(0,c.useEffect)((function(){I&&z&&f.ZP.sendEvent({category:"Gravity",action:"Search history appears",label:"guid: ".concat(null===C||void 0===C?void 0:C.guid)})}),[C,z,I]);var O=(0,v.jQ)(),D=function(){var n=(0,r.Z)((function(){return(0,o.__generator)(this,(function(n){switch(n.label){case 0:return[4,O({inputVal:j,onSearch:y})];case 1:return n.sent(),N(!1),[2]}}))}));return function(){return n.apply(this,arguments)}}(),H=function(){var n=(0,r.Z)((function(n){var t,e,r;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return t=n.data,e=n.type,r=n.isClickHistory,[4,$({onSearch:y,data:t,isClickHistory:void 0!==r&&r,type:e})];case 1:return o.sent(),N(!1),[2]}}))}));return function(t){return n.apply(this,arguments)}}();return(0,i.jsxs)(w,{className:"search-input",children:[(0,i.jsx)(u.Z,{value:j,placeholder:G,size:"lg",readOnly:!0,onFocus:function(){return N(!0)}}),(0,i.jsx)(s.ZP,{closable:!1,titleStyle:{textAlign:"center"},open:I,onClose:function(){return N(!1)},hideFooter:!0,destroyOnClose:!0,closeOnShadeClick:!1,style:{width:"100%",borderRadius:0},contentStyle:{padding:"60px 0 0"},wrapperClassName:"grvt-search-modal",children:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(Z,{children:[(0,i.jsx)(u.Z,{size:"lg",value:j,onChange:function(n){var t;return b(null===(t=n.target)||void 0===t?void 0:t.value)},style:{background:"transparent",border:"none",outline:"none",boxShadow:"none",borderRadius:"8px",fontSize:"16px"},inputRef:S,onKeyDown:function(n){return 13===n.keyCode&&D()},placeholder:G}),(0,i.jsx)(a.ZP,{size:"sm",ml:2,onClick:function(){return N(!1)},children:m("Cancel")})]}),(0,i.jsx)(g.Z,{suggestionData:E,keyword:j,historyMode:z,wrapperStyle:{width:"100%"},onClick:H,isLoading:L})]})})]})}},48224:function(n,t,e){e.d(t,{Z:function(){return I}});var r=e(22710),o=e(5163),i=e(52322),c=e(2784),a=e(96904),u=e(81730),s=e(54627),l=e(35923),d=e(5632),f=e(87612),p=e(60457),h=e(25084),v=e(43961),g=e(83409),x=e(25453),y=e(96870),m=e(35531),C=e(75190),Z=e(82740),w=e(71383),k=e(87681);function j(){var n=(0,C.Z)(["\n  background-color: var(--c-color-background-2);\n"]);return j=function(){return n},n}function b(){var n=(0,C.Z)(["\n  display: flex;\n  align-items: center;\n  input {\n    background-color: ",";\n  }\n\n  .input-block {\n    width: ",";\n    transition: all 0.15s;\n\n    &.expanded {\n      width: 100%;\n    }\n    input {\n      font-size: 16px;\n    }\n    & > div:first-child {\n      width: 100%;\n    }\n    .pp-main-content {\n      padding: 0 !important;\n      ",";\n    }\n  }\n  button {\n    width: 101px;\n  }\n"]);return b=function(){return n},n}var S=Z.ZP.div.withConfig({componentId:"sc-efacaa40-0"})(j()),P=Z.ZP.div.withConfig({componentId:"sc-efacaa40-1"})(b(),(function(n){return n.theme.isNight?w.O.neutral2:"#F4F7F9"}),(function(n){return n.showBack?"calc(100% - 151px)":"calc(100% - 117px)"}),k.FE),I=function(n){var t=n.defaultValue,e=void 0===t?"":t,C=n.showBack,Z=void 0!==C&&C,w=n.onSearch,k=void 0===w?function(n,t){}:w,j=(0,x.$G)().t,b=(0,d.useRouter)(),I=(0,c.useContext)(f.gX).userInfo,N=(0,c.useState)(e),T=N[0],E=N[1],_=(0,c.useState)(!1),F=_[0],L=_[1],R=(0,c.useState)(!1),z=R[0],W=R[1],M=(0,c.useRef)(null),$=(0,c.useRef)(null),G=(0,c.useState)(!1),O=G[0],D=G[1],H=(0,c.useState)(0),A=H[0],V=H[1],U=(0,c.useState)(!1),q=U[0],Q=U[1],B=(0,c.useState)((0,g.H)()),K=B[0],X=B[1],J=(0,c.useState)(!1),Y=J[0],nn=J[1];(0,p.Z)($,(function(){return L(!1)}));var tn=(0,y.O$)(),en=tn.querySuggestion,rn=tn.handleClickSuggestion;(0,c.useEffect)((function(){E(e)}),[e]),(0,c.useEffect)((function(){F?setTimeout((function(){W(!0)}),180):W(!1)}),[F]),(0,c.useEffect)((function(){var n;if(F){var t=(0,v.fp)(y.UT)||[];if(!T.trim()&&0===(0,y.EI)(t).length)return void D(!1);if(Q(!T),n=setTimeout((function(){var n,t=M.current?null===(n=M.current)||void 0===n?void 0:n.offsetWidth:541;V(t),D(!0)}),200),!T.trim())return;nn(!0),en(T,(function(n){X(n);var t=n.tokens,e=n.topics,r=n.accounts,o=n.postCount;0!==t.length||0!==e.length||0!==r.length||0!==Number(o)||q||D(!1),nn(!1)}))}else X((0,g.H)()),D(!1);return function(){n&&clearTimeout(n)}}),[T,F,q]);var on=(0,y.jQ)(),cn=function(){var n=(0,r.Z)((function(){var n;return(0,o.__generator)(this,(function(t){switch(t.label){case 0:return D(!1),L(!1),null===(n=M.current)||void 0===n||n.blur(),[4,on({inputVal:T,onSearch:k})];case 1:return t.sent(),[2]}}))}));return function(){return n.apply(this,arguments)}}(),an=function(){var n=(0,r.Z)((function(n){var t,e,r;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return t=n.data,e=n.type,r=n.isClickHistory,[4,rn({onSearch:k,data:t,isClickHistory:void 0!==r&&r,type:e})];case 1:return o.sent(),D(!1),L(!1),[2]}}))}));return function(t){return n.apply(this,arguments)}}();return(0,c.useEffect)((function(){q&&O&&h.ZP.sendEvent({category:"Gravity",action:"Search history appears",label:"guid: ".concat(null===I||void 0===I?void 0:I.guid)})}),[O,q,I]),(0,i.jsx)(S,{children:(0,i.jsxs)(P,{ref:$,showBack:Z,children:[Z&&(0,i.jsx)(s.Z,{mr:3,onClick:function(){return b.back()},style:{cursor:"pointer",flexShrink:0}}),(0,i.jsx)("div",{className:"input-block ".concat(F?"":"expanded"),children:(0,i.jsx)(a.ZP,{arrow:!1,open:O,initialFocus:-1,canKeyboardClickWay:!1,allowedPlacements:["bottom"],positionStrategy:"absolute",content:(0,i.jsx)("div",{children:O?(0,i.jsx)(m.Z,{suggestionData:K,keyword:T,wrapperStyle:{width:A},onClose:function(){return D(!1)},onClick:an,historyMode:q,isLoading:Y}):null}),children:(0,i.jsx)("div",{style:{width:"100%"},children:(0,i.jsx)(l.Z,{placeholder:j("Search posts or users..."),size:"lg",value:T,onChange:function(n){var t;return E(null===(t=n.target)||void 0===t?void 0:t.value)},name:"search-input",autoComplete:"off",onFocus:function(){L(!0)},inputRef:M,onKeyDown:function(n){return 13===n.keyCode&&cn()}})})})}),z?(0,i.jsx)(u.ZP,{variant:"primary",size:"lg",ml:3,onClick:cn,children:j("Search")}):null]})})}},35531:function(n,t,e){e.d(t,{Z:function(){return X}});var r=e(62230),o=e(52322),i=e(2784),c=e(38789),a=e(83434),u=e(57075),s=e(85244),l=e(98240),d=e(92324),f=function(n){var t=n.sx,e=void 0===t?{}:t,i=(0,l.Z)(n,["sx"]);return(0,o.jsxs)(d.Z,(0,s.Z)((0,r.Z)({sx:e},i),{iconName:"time",children:[(0,o.jsx)("path",{fill:"currentColor",d:"M12 2C6.49 2 2 6.49 2 12C2 17.51 6.49 22 12 22C17.51 22 22 17.51 22 12C22 6.49 17.51 2 12 2ZM12 20C7.59 20 4 16.41 4 12C4 7.59 7.59 4 12 4C16.41 4 20 7.59 20 12C20 16.41 16.41 20 12 20Z"}),(0,o.jsx)("path",{fill:"currentColor",d:"M16.78 13.61L13 11.43V7.01001C13 6.46001 12.55 6.01001 12 6.01001C11.45 6.01001 11 6.46001 11 7.01001V12.01C11 12.01 11.01 12.07 11.02 12.09C11.02 12.18 11.04 12.26 11.07 12.34C11.09 12.39 11.11 12.44 11.14 12.48C11.17 12.54 11.21 12.6 11.26 12.65C11.31 12.7 11.36 12.74 11.41 12.78C11.44 12.8 11.46 12.84 11.5 12.86L15.78 15.33C15.94 15.42 16.11 15.46 16.28 15.46C16.63 15.46 16.96 15.28 17.15 14.96C17.43 14.48 17.26 13.87 16.78 13.59V13.61Z"})]}))},p=i.memo(f),h=e(35986),v=e(72779),g=e.n(v),x=e(17073),y=e(17245),m=e(17365),C=e(4319),Z=e(39344),w=e(87612),k=e(25084),j=e(43961),b=e(98789),S=e(31504),P=e(25453),I=e(96870),N=e(75190),T=e(82740),E=e(87681);function _(){var n=(0,N.Z)(["\n          max-height: 260px;\n          padding: 30px 0 0;\n          overflow: auto;\n        "]);return _=function(){return n},n}function F(){var n=(0,N.Z)(["\n          padding: 12px 0 0;\n          @media (min-width: ","px) {\n            max-height: 455px;\n            overflow: auto;\n          }\n        "]);return F=function(){return n},n}function L(){var n=(0,N.Z)(["\n            padding-top: 30px;\n            height: inherit;\n          "]);return L=function(){return n},n}function R(){var n=(0,N.Z)(["\n            padding-top: 23px;\n          "]);return R=function(){return n},n}function z(){var n=(0,N.Z)(["\n  position: relative;\n  font-size: 14px;\n  ","\n  ","\n\n  @media (max-width: ","px) {\n    ","\n  }\n  .title {\n    margin: 5px 16px;\n    font-size: 12px;\n    font-weight: 600;\n    color: #808a9d;\n  }\n  .ellipsis {\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    overflow: hidden;\n  }\n"]);return z=function(){return n},n}function W(){var n=(0,N.Z)(["\n  &:nth-of-type(1) {\n    margin-top: 6px;\n  }\n  cursor: pointer;\n  &:hover {\n    background-color: ",";\n  }\n  ","\n"]);return W=function(){return n},n}function M(){var n=(0,N.Z)(["\n  overflow: hidden;\n  display: inline-grid;\n  grid-auto-flow: column;\n  overflow: hidden;\n  align-items: center;\n  gap: 8px;\n  padding: 12px 16px;\n\n  &.account {\n    gap: 4px;\n  }\n\n  &.isNFT {\n    display: grid;\n    grid-template-columns: auto auto minmax(min-content, 1fr) max-content;\n  }\n\n  .icon-certified {\n    font-size: 18px;\n  }\n  .coin-logo {\n    border-radius: 50%;\n  }\n"]);return M=function(){return n},n}function $(){var n=(0,N.Z)(["\n  display: none;\n  align-items: center;\n  padding: 2px 4px;\n  align-self: normal;\n  color: ",";\n  ","\n"]);return $=function(){return n},n}function G(){var n=(0,N.Z)(["\n  padding: 0 16px;\n  width: 100%;\n  height: 42px;\n  display: grid;\n  grid-auto-flow: column;\n  grid-template-columns: max-content 1fr max-content;\n  overflow: hidden;\n  align-items: center;\n  gap: 10px;\n  cursor: pointer;\n  &:hover {\n    background-color: ",";\n  }\n  ","\n\n  :hover {\n    "," {\n      display: flex;\n    }\n  }\n"]);return G=function(){return n},n}function O(){var n=(0,N.Z)(["\n  position: absolute;\n  top: 10px;\n  right: 16px;\n  color: ",";\n  cursor: pointer;\n"]);return O=function(){return n},n}var D=T.ZP.div.withConfig({componentId:"sc-d99e8e1-0"})(z(),E.FE,(function(n){return n.historyMode?(0,T.iv)(_()):(0,T.iv)(F(),E.AV.XSMALL_MIN)}),E.AV.XSMALL_MIN,(function(n){return n.historyMode?(0,T.iv)(L()):(0,T.iv)(R())})),H=T.ZP.div.withConfig({componentId:"sc-d99e8e1-1"})(W(),c.colorGray200,(0,E.CC)("background-color:transparent")),A=T.ZP.div.withConfig({componentId:"sc-d99e8e1-2"})(M()),V=T.ZP.div.withConfig({componentId:"sc-d99e8e1-3"})($(),c.colorTextSecondary,(0,E.CC)("display: flex;")),U=T.ZP.div.withConfig({componentId:"sc-d99e8e1-4"})(G(),c.colorGray200,(0,E.CC)("background-color:transparent;height: 48px;border-bottom:1px solid var(--color-light-neutral-2);"),V),q=T.ZP.div.withConfig({componentId:"sc-d99e8e1-5"})(O(),c.colorBlue),Q=function(n){var t=n.data,e=t.id,r=t.name,i=t.symbol;return(0,o.jsxs)(A,{children:[(0,o.jsx)(a.Z,{textType:"body-md",className:"ellipsis",sx:{fontWeight:c.fontWeight600,color:c.colorTextPrimary},children:i.includes("$")?i:"$".concat(i)}),(0,o.jsx)("img",{className:"coin-logo",src:(0,S.pt)("/static/img/coins/64x64/".concat(e,".png")),height:16,width:16,alt:i}),(0,o.jsx)(a.Z,{textType:"body-md",className:"ellipsis",sx:{fontWeight:c.fontWeight500,color:c.colorTextSecondary},children:r})]})},B=function(n){var t=n.data,e=t||{},r=e.nickname,i=e.handle,u=e.avatar,s=e.avatarId;return(0,o.jsxs)(A,{className:"account",children:[(0,o.jsx)(x.Z,{id:s,avatarUrl:null===u||void 0===u?void 0:u.url,size:"xsm",style:{marginRight:"4px"}}),(0,o.jsx)(a.Z,{className:"ellipsis",sx:{fontWeight:c.fontWeight600,color:c.colorTextPrimary},children:r}),(0,o.jsx)(y.Z,{owner:t,displayBadgeTip:!1,displayCertifiedTip:!1}),(0,o.jsxs)(a.Z,{className:"ellipsis",sx:{fontWeight:c.fontWeight500,color:c.colorTextSecondary},children:["@",i]})]})},K=function(n){var t=n.data,e=(0,P.$G)().t,r=t.name,i=t.logo,u=t.totalItems,s=t.floorPrice,l=t.floorPriceToken,d=t.contractAddress,f=t.platformAlias,p=d&&f;return(0,o.jsxs)(A,{className:g()("topic",{isNFT:p}),children:[p?(0,o.jsx)(m.Z,{src:i,size:24}):null,(0,o.jsxs)(a.Z,{className:"ellipsis",sx:{fontWeight:c.fontWeight600,color:c.colorTextPrimary},children:["#",r]}),p?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(a.Z,{className:"ellipsis",sx:{fontWeight:c.fontWeight500,color:c.colorTextSecondary},children:[(0,b.Z)(Number(u||0))," ",e("items")]}),s&&(0,o.jsx)(a.Z,{sx:{fontWeight:c.fontWeight500,color:c.colorTextSecondary},children:(0,o.jsx)(Z.ZP,{price:s,maxLen:9,suffix:" "+l,prefix:e("Floor: ")})})]}):null]})},X=function(n){var t=n.suggestionData,e=n.keyword,s=n.wrapperStyle,l=n.onClose,d=n.onClick,f=n.historyMode,v=void 0!==f&&f,g=n.isLoading,x=void 0!==g&&g,y=(0,i.useState)((0,I.EI)((0,j.fp)(I.UT)||[])),m=y[0],Z=y[1],S=(0,i.useContext)(w.gX).userInfo,N=(0,P.$G)().t,T=t.tokens,E=t.accounts,_=t.topics,F=t.postCount;return(0,o.jsx)(D,{style:(0,r.Z)({},s),historyMode:v,children:v?(0,o.jsxs)(o.Fragment,{children:[m.length>0&&(0,o.jsx)(q,{onClick:function(){Z([]),(0,j.qQ)(I.UT,[]),null===l||void 0===l||l(),k.ZP.sendEvent({category:"Gravity",action:"Delete all search history",label:"guid: ".concat(null===S||void 0===S?void 0:S.guid)})},children:"Clear All"}),m.map((function(n,t){return(0,o.jsx)(H,{onClick:function(){d({data:n,type:n.type,isClickHistory:!0}),k.ZP.sendEvent({category:"Gravity",action:"Select in Search history",label:"Key word: ".concat(n.keyword,", guid: ").concat(null===S||void 0===S?void 0:S.guid)})},children:(0,o.jsxs)(U,{children:[(0,o.jsx)(p,{sx:{color:c.colorTextSecondary}}),(0,o.jsx)(a.Z,{className:"ellipsis",sx:{color:c.colorTextPrimary},children:n.keyword}),(0,o.jsx)(V,{onClick:function(t){!function(n){var t=((0,j.fp)(I.UT)||[]).filter((function(t){return t.keyword!==n.keyword}));(0,j.qQ)(I.UT,t),Z(t),0===t.length&&(null===l||void 0===l||l())}(n),k.ZP.sendEvent({category:"Gravity",action:"Delete in search history",label:"Key word: ".concat(n.keyword,", guid: ").concat(null===S||void 0===S?void 0:S.guid)}),t.stopPropagation()},children:(0,o.jsx)(h.Z,{})})]})},t)})),(0,o.jsx)("div",{style:{height:"12px"}})]}):x?(0,o.jsx)(C.ZP,{spin:!0,text:"loading"}):(0,o.jsxs)("div",{children:[(null===T||void 0===T?void 0:T.length)>0&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("p",{className:"title",children:N("Cryptoassets")}),T.map((function(n,t){return(0,o.jsx)(H,{onClick:function(){return d({data:n,type:"token"})},children:(0,o.jsx)(Q,{data:n})},n.slug)}))]}),(null===E||void 0===E?void 0:E.length)>0&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("p",{className:"title",children:N("People")}),E.map((function(n,t){return(0,o.jsx)(H,{onClick:function(){return d({data:n,type:"account"})},children:(0,o.jsx)(B,{data:n})},n.guid||t)}))]}),(null===_||void 0===_?void 0:_.length)>0&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("p",{className:"title",children:N("Topics")}),_.map((function(n){return(0,o.jsx)(H,{onClick:function(){return d({data:n,type:"topic"})},children:(0,o.jsx)(K,{data:n})},n.name)}))]}),Number(F)>0&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("p",{className:"title",children:N("Posts")}),(0,o.jsx)(H,{onClick:function(){return d({data:e,type:"post"})},children:(0,o.jsxs)(A,{children:[(0,o.jsx)(u.Z,{sx:{color:c.colorTextSecondary,fontSize:"16px"}}),(0,o.jsx)(a.Z,{children:Number(F||0)<=1?N("{{postCount}} post related to '{{keyword}}' in recent days.",{postCount:(0,b.Z)(Number(F||0)),keyword:e}):N("{{postCount}} posts related to '{{keyword}}' in recent days.",{postCount:(0,b.Z)(Number(F||0)),keyword:e})})]})})]})]})})}},96870:function(n,t,e){e.d(t,{EI:function(){return v},O$:function(){return S},Tt:function(){return x},UT:function(){return h},jQ:function(){return m}});var r,o=e(22710),i=e(81541),c=e(5163),a=e(2784),u=e(1456),s=e(85238),l=e(25084),d=e(43961),f=e(83409),p=e(55790),h="GravitySearchHistory";!function(n){n.token="token",n.account="account",n.topic="topic",n.post="post"}(r||(r={}));var v=function(n){return(0,p.Z)((function(){return n.filter((function(n){return n.keyword}))}),[])},g=function(){var n=(0,o.Z)((function(n){return(0,c.__generator)(this,(function(t){switch(t.label){case 0:return n?[4,(0,s.ui)()]:[2];case 1:return[2,t.sent().find((function(t){return t.content.symbol.replace(/\$/g,"").toLowerCase()===(null===n||void 0===n?void 0:n.toLowerCase())}))]}}))}));return function(t){return n.apply(this,arguments)}}(),x=function(){var n=(0,o.Z)((function(n,t){var e,o,i,a,u,s,l,d;return(0,c.__generator)(this,(function(c){switch(c.label){case 0:return o=(e=t||{}).type,i=e.slug,a=function(n){switch(n){case r.account:return"people";case r.post:return"latest";default:return"top"}},u=a(o),s=n.trim().replace(/\s{2,}/g," ").split(" "),(l=s[0]).startsWith("$")?i?[2,"/search/".concat(u,"/").concat(i,"/")]:[3,1]:[3,3];case 1:return[4,g(null===l||void 0===l?void 0:l.replace(/\$/g,""))];case 2:return d=c.sent(),[2,1===s.length&&d?"/search/".concat(u,"/").concat(d.content.slug,"/"):"/search/".concat(u,"/").concat(d.content.slug,"/?q=").concat(n)];case 3:return o===r.account?[2,"/profile/".concat(n,"/")]:[2,"/search/".concat(u,"/?q=").concat(n)]}}))}));return function(t,e){return n.apply(this,arguments)}}(),y=function(n){var t=n.onSearch,e=n.keyword,r=n.extra,o=(0,d.fp)(h)||[];(0,d.qQ)(h,[{keyword:e,extra:r}].concat((0,i.Z)(o.filter((function(n){return n.keyword!==e})))).slice(0,10)),null===t||void 0===t||t(e,r)},m=function(){return function(){var n=(0,o.Z)((function(n){var t,e,r;return(0,c.__generator)(this,(function(o){return t=n.inputVal,e=n.onSearch,(r=t.trim())?(y({onSearch:e,keyword:r}),l.ZP.sendEvent({category:"Gravity",action:"Community_ClickSearch",json_data:{search_term:r}}),[2]):[2]}))}));return function(t){return n.apply(this,arguments)}}()},C=function(n){var t=n.onSearch,e=n.data,o=n.type,i=n.isClickHistory,c=void 0!==i&&i?e.keyword:function(n,t){switch(t){case r.token:return"$".concat(n.symbol);case r.account:return n.handle;case r.topic:return"#".concat(n.name);case r.post:return n;default:return""}}(e,o);l.ZP.sendEvent({category:"Gravity",action:"Search",label:"Query Entered ".concat(c)}),y({onSearch:t,keyword:c,extra:{type:o,slug:o===r.token?e.slug:void 0}})},Z=function(n){var t=0;return function(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];var c=++t;return new Promise((function(e,o){n.apply(void 0,(0,i.Z)(r)).then((function(n){c===t&&e(n)})).catch((function(n){c===t&&o(n)}))}))}}(f.Z),w=new Map,k=function(n){var t=JSON.stringify(n),e=w.get(t);return e&&e.expire>+new Date?e.value:(w.delete(t),Z(n).then((function(n){return w.set(t,{value:n,expire:+new Date+6e5}),n})))};function j(n,t){return b.apply(this,arguments)}function b(){return(b=(0,o.Z)((function(n,t){var e,r;return(0,c.__generator)(this,(function(o){switch(o.label){case 0:return(e=null===n||void 0===n?void 0:n.trim())?[4,k({keyword:e,limit:5,scene:"community"})]:[2];case 1:return r=o.sent(),t(r),[2]}}))}))).apply(this,arguments)}var S=function(){var n=(0,a.useCallback)((0,u.Z)(j,1e3,{leading:!1,trailing:!0}),[]);return{handleClickSuggestion:C,querySuggestion:n}}},83409:function(n,t,e){e.d(t,{H:function(){return a}});var r=e(7279),o=e(15798),i=e.n(o),c=e(78225),a=function(){return{tokens:[],accounts:[],topics:[],postCount:"0"}};t.Z=function(n){return(0,c.zh)({baseURL:"".concat(i().env.endpoints.javaApi),url:"/gravity/v4/gravity/global-search",method:"POST",data:n}).then((function(n){var t,e=n.data;return(0,r.Z)(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.suggestions)?a():e.data.suggestions.reduce((function(n,t){switch(t.type){case"token":n.tokens=t.tokens||[];break;case"account":n.accounts=t.accounts||[];break;case"topic":n.topics=t.topicsV4||[];break;case"text":n.postCount=t.postCount}return n}),a())})).catch((function(){return a()}))}},20025:function(n,t,e){e.d(t,{ZP:function(){return x},jB:function(){return g}});var r=e(62230),o=e(81541),i=e(2784),c=e(82066),a=e(7279),u=e(30710),s=e(15798),l=e.n(s),d=e(55790),f=e(78225),p=function(n){var t=function(n){var t=new RegExp(/^\d+$/);return(0,d.Z)((function(){return n.filter((function(n){return t.test(n.gravityId)}))}),[])}(n);if(!(0,a.Z)(t))return(0,f.zh)({baseURL:"".concat(l().env.endpoints.javaApi,"/gravity"),url:"/v3/gravity/counter",method:"POST",data:{postIds:t.map((function(n){return n.gravityId})),posts:t.map((function(n){return{id:n.gravityId,bucketFrom:n.bucketFrom}}))},suppressWarning:!0}).catch((function(){}))},h=[],v=null,g=function(){var n=(0,u.Ff)(),t=n.isRecordPostImpression,e=n.isLoading,o=(0,i.useRef)(!1),c=(0,i.useRef)(null),a=(0,i.useRef)([]),s=(0,i.useRef)(),l=function(n){(function(n){var t=Date.now();return!!(s.current&&t-s.current<1e4&&a.current.find((function(t){return t.gravityId===n})))})(n.gravityId)||(h.push(n),null===v&&(v=setInterval((function(){0!==h.length&&(p(h),h=[])}),1e4)))};(0,i.useEffect)((function(){!e&&t&&a.current.length>0&&(o.current=!0,s.current=Date.now(),p(a.current))}),[e]);return{recordPostImpressionInList:function(n,i){if(n){var u=(0,r.Z)({gravityId:n},i);if(e)a.current.push(u);else{if(!t)return;o.current?l(u):(a.current.push(u),null===c.current&&(c.current=setTimeout((function(){o.current=!0,s.current=Date.now(),p(a.current)}),100)))}}}}},x=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,u.Ff)(),e=t.isRecordPostImpression,s=t.isLoading,l=(0,i.useState)([]),d=l[0],f=l[1];return(0,i.useEffect)((function(){!s&&e&&d.length>0&&p(d)}),[s]),(0,c.useMutation)((function(n){if(!(0,a.Z)(n))return s?void f((function(t){return(0,o.Z)(t).concat((0,o.Z)(n))})):e&&p(n)}),(0,r.Z)({},n))}},57075:function(n,t,e){var r=e(62230),o=e(85244),i=e(98240),c=e(52322),a=e(2784),u=e(92324),s=function(n){var t=n.sx,e=void 0===t?{}:t,a=(0,i.Z)(n,["sx"]);return(0,c.jsx)(u.Z,(0,o.Z)((0,r.Z)({sx:e},a),{iconName:"search",children:(0,c.jsx)("path",{fill:"currentColor",d:"M20.41 19L17.31 15.9C18.36 14.54 19 12.85 19 11C19 6.59 15.41 3 11 3C6.59 3 3 6.59 3 11C3 15.41 6.59 19 11 19C12.85 19 14.54 18.37 15.9 17.31L19 20.41C19.2 20.61 19.45 20.7 19.71 20.7C19.97 20.7 20.22 20.6 20.42 20.41C20.81 20.02 20.81 19.39 20.42 19H20.41ZM5 11C5 7.69 7.69 5 11 5C14.31 5 17 7.69 17 11C17 14.31 14.31 17 11 17C7.69 17 5 14.31 5 11Z"})}))};t.Z=a.memo(s)},79424:function(n,t,e){function r(n){throw n}e.d(t,{Z:function(){return r}})}}]);