"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[884],{9938:function(n,t,o){o.d(t,{Z:function(){return _}});var e=o(52322),r=o(2784),i=o(68434),a=o(72779),l=o.n(a),s=o(1367),d=o(37881),p=o(5632),u=o(8930),c=o(93223),m=o(81286),v=o(63082),g=o(88536),x=o(75174),h=o(8354),f=o(71708),y=o(15013),w=o(4726),C=o(24496),b=o(61577),j=o(92296),Z=o(60536),I=o(46425),N=o(25716),R=o(99491),k=o(92702),S=o(58704),L=o(32184),P=o(75190),T=o(82740),U=o(87681);function A(){var n=(0,P.Z)(["\n  display: grid;\n  grid-template-columns: 72px 1fr;\n  padding-bottom: 20px;\n  position: relative;\n  .user-avatar {\n    &.disabled {\n      cursor: pointer;\n      pointer-events: none;\n    }\n    cursor: pointer;\n    .avatar-wrapper {\n      width: 56px;\n      height: 56px;\n    }\n  }\n  .post-wrapper {\n  }\n  .post-head {\n    width: calc(100% - 90px);\n    .post-head-title {\n      &.disabled {\n        cursor: pointer;\n        pointer-events: none;\n      }\n    }\n    .post-option {\n      position: absolute;\n      right: -90px;\n      top: 0;\n    }\n  }\n\n  .post-toolbar {\n    grid-column: 2 / 3;\n    div {\n      justify-self: left;\n    }\n  }\n\n  &.remove {\n    .post-option {\n      display: none;\n    }\n  }\n  &:first-of-type {\n    margin-top: 20px;\n    ",";\n  }\n\n  &:last-of-type {\n    border-bottom: 1px solid var(--color-light-neutral-2);\n    padding-bottom: 10px;\n\n    &::after {\n      width: 0;\n    }\n\n    .reply-mention {\n      font-size: 14px;\n    }\n  }\n\n  &::after {\n    content: '';\n    position: absolute;\n    top: 62px;\n    left: 27px;\n    width: 1px;\n    height: calc(100% - 68px);\n    background-color: var(--color-light-neutral-5);\n    transform: scaleX(0.5);\n    ",";\n  }\n\n  .text {\n    text-overflow: ellipsis;\n    display: -webkit-box;\n    -webkit-box-orient: vertical;\n    -webkit-line-clamp: ",";\n    overflow: hidden;\n    p {\n      margin: 0;\n    }\n  }\n  .reply-mention {\n    margin-bottom: 8px;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n  }\n  .post-card__disappeared {\n    ",";\n  }\n  .repost-card__comment {\n    ",";\n  }\n\n  @media (max-width: ","px) {\n    grid-template-columns: 40px 1fr;\n\n    .user-avatar {\n      .avatar-wrapper {\n        width: 32px;\n        height: 32px;\n      }\n    }\n    .post-content-wrapper {\n      margin-top: 6px;\n    }\n    .reply-mention {\n      margin-top: 8px;\n    }\n    &:last-of-type {\n      .user-avatar {\n        grid-row: 1;\n        grid-column: 1;\n      }\n      .post-wrapper {\n        grid-row: 1/3;\n        grid-column: 1/3;\n        .post-head {\n          padding-left: 40px;\n        }\n      }\n      .post-toolbar {\n        grid-column: 1 / 3;\n      }\n    }\n  }\n"]);return A=function(){return n},n}var E=T.ZP.section.withConfig({componentId:"sc-bd0dc677-0"})(A(),(0,U.CC)("\n      margin-top: 8px;\n    "),(0,U.CC)("\n      top: 40px;\n      left: 16px;\n      height: calc(100% - 48px);\n    "),(function(n){return n.maxLine}),(0,U.CC)("\n      margin-top: 12px;\n    "),(0,U.CC)("\n      margin-bottom: 12px;\n    "),U.AV.XSMALL_MIN),_=function(n){var t,o,a,P=n.data,T=n.showDateBottom,U=void 0!==T&&T,A=n.showTranslate,_=void 0!==A&&A,D=n.showFollowOption,O=void 0!==D&&D,F=n.showAction,B=void 0===F||F,M=n.showReplyUser,V=void 0!==M&&M,z=n.replyUserPosition,G=void 0===z?"middle":z,K=n.maxLine,W=n.showCommentModal,X=void 0===W||W,H=n.onFormatReplyUser,q=n.renderText,J=n.onItemClick,Y=n.renderSmallPic,$=void 0!==Y&&Y,Q=n.isLatestPost,nn=void 0===Q||Q,tn=n.className,on=P.textContent,en=P.owner,rn=void 0===en?y.h7:en,an=P.originalContent,ln=P.gravityId,sn=P.isYours,dn=P.photoIds,pn=P.status,un=P.linkCardVisible,cn=P.repostContent,mn=P.languageCode,vn=void 0===mn?"en":mn,gn=P.blockStatus,xn=P.sourceExternal,hn=rn.handle,fn=rn.guid,yn=(0,p.useRouter)(),wn=(0,v.tl)(),Cn=wn.isGravityApp,bn=wn.userInfo,jn=wn.invokeLogin,Zn=(0,r.useState)(!1),In=Zn[0],Nn=Zn[1],Rn=(0,f.Z)({gravityIds:P.path},{select:function(n){var t=(0,s.Z)(n,"guid").filter((function(n){return n.guid!==(null===bn||void 0===bn?void 0:bn.guid)&&n.guid!==fn}));return H?H(t):t},enabled:V&&!(0,h.Z)(P.path)&&0===Number(pn)}).data,kn=hn===(null===bn||void 0===bn?void 0:bn.username),Sn=(null===bn||void 0===bn?void 0:bn.guid)&&bn.guid===(null===P||void 0===P||null===(t=P.owner)||void 0===t?void 0:t.guid)||sn,Ln=gn===y.M3.USER_BLOCKED,Pn=!kn&&!Sn&&yn.query.id===P.gravityId&&!Ln,Tn=y.ez.Twitter===xn,Un=Cn&&B&&!Tn,An=pn===y.b3.NORMAL&&gn!==y.M3.USER_BLOCKED,En=(0,L.u)({postData:P}),_n=En.showLinkCard,Dn=En.showVideo,On=En.showVotingCard,Fn=En.videoUrl,Bn=En.videoPoster,Mn=En.isNormalStatus,Vn=En.renderSpecialContent,zn=function(){return V?(0,h.Z)(Rn)?null:(0,e.jsx)(w.Z,{replyToOwner:Rn}):null};return(0,e.jsxs)(E,{className:l()("comment-post-item",tn,{remove:pn===y.b3.BAN||pn===y.b3.DELETE}),maxLine:K,id:ln,onClick:J||function(n){if(pn!==y.b3.BAN&&pn!==y.b3.DELETE){var t=document.getSelection();if("Range"!==(null===t||void 0===t?void 0:t.type)){if(yn.query.id===P.gravityId)return;yn&&yn.push("/post/".concat(P.gravityId))}}},children:[(0,e.jsx)(j.Z,{data:P}),(0,e.jsxs)(i.Z,{className:"post-wrapper",children:[(0,e.jsx)(b.Z,{data:P,showDateBottom:!U,children:Un&&(0,e.jsx)(I.Z,{data:{guid:null===P||void 0===P||null===(o=P.owner)||void 0===o?void 0:o.guid,handle:null===P||void 0===P||null===(a=P.owner)||void 0===a?void 0:a.handle}})}),Mn()?(0,e.jsxs)(e.Fragment,{children:["middle"===G&&zn(),(0,e.jsxs)("div",{className:"post-content-wrapper",children:[q?q():(0,e.jsx)(c.Z,{textContent:on,originalContent:an,gravityId:ln,foldHeight:1/0,shouldShowLinkCard:_n,linkCardVisible:un,showTranslate:_,languageCode:vn}),dn&&(null===dn||void 0===dn?void 0:dn.length)>0&&pn!==y.b3.BAN&&(0,e.jsx)(Z.p,{photos:dn,renderSmallPic:$,item:P}),cn&&(0,e.jsx)(R.Z,{inComment:!0,data:cn}),Dn&&(0,e.jsx)(u.Z,{url:Fn,poster:Bn,renderAsPoster:$,renderStyleMode:$?g.Z8.liveChat:g.Z8.community}),On&&(0,e.jsx)(S.Z,{data:P,isProPoll:null===rn||void 0===rn?void 0:rn.canPostLongPoll}),(0,e.jsx)(C.Z,{data:P})]}),U&&(0,e.jsx)(d.ZP,{mt:12,color:"var(--color-light-neutral-5)",children:(0,x.wE)(new Date(Number(P.postTime)))}),"bottom"===G&&zn()]}):Vn()]}),An&&(0,e.jsx)(k.Z,{data:P,onComment:function(){if(Number(null===P||void 0===P?void 0:P.commentCount)>0)X&&yn&&yn.push("/post/".concat(P.gravityId,"?focusReply=true"));else if(bn){if(X)return void Nn(!0)}else jn()},enableFollow:O&&!Pn,showView:nn}),In&&(0,e.jsx)(r.Suspense,{fallback:(0,e.jsx)(m.Z,{}),children:(0,e.jsx)(N.default,{data:P,isOpen:In,onClose:function(){return Nn(!1)}})})]})}},4726:function(n,t,o){o.d(t,{Z:function(){return m}});var e=o(52322),r=(o(2784),o(38789)),i=o(49925),a=o(30593),l=o(8112),s=o(75190);function d(){var n=(0,s.Z)(["\n  font-size: 12px;\n  font-weight: 600;\n  color: #808a9d;\n  > span {\n    cursor: pointer;\n  }\n"]);return d=function(){return n},n}var p=o(82740).ZP.div.withConfig({componentId:"sc-1f773c9b-0"})(d()),u=o(2505),c=function(n){var t=n.owner;return t.userDeleted||!t.guid||-1e3===Number(t.guid)?(0,e.jsxs)("span",{style:{color:r.colorGray500,fontWeight:r.fontWeight400,pointerEvents:"none"},children:["@",null===t||void 0===t?void 0:t.handle]}):(0,e.jsx)(i.default,{interactive:!0,placement:"bottom-start",singletonTarget:void 0,content:(0,e.jsx)(a.HF,{guid:null===t||void 0===t?void 0:t.guid}),appendTo:function(){return document.body},touch:!0,children:(0,e.jsxs)("span",{style:{color:r.colorBlue,fontWeight:r.fontWeight400},children:["@",null===t||void 0===t?void 0:t.handle]})})},m=function(n){var t=n.replyToOwner;if(!t)return null;if(Array.isArray(t)){var o=(0,u.X)(t);return 0===o.length?null:(0,e.jsx)(p,{className:"reply-mention",children:(0,e.jsx)(l.cC,{ns:"gravity",i18nKey:"Replying to <ReplyUser></ReplyUser>",components:{ReplyUser:(0,e.jsx)(e.Fragment,{children:o.map((function(n){return(0,e.jsx)(c,{owner:n},n.guid)}))})}})})}return(0,u.X)(t)?(0,e.jsx)(p,{className:"reply-mention",children:(0,e.jsx)(l.cC,{ns:"gravity",i18nKey:"Replying to <ReplyUser></ReplyUser>",components:{ReplyUser:(0,e.jsx)(c,{owner:t})}})}):null}},25716:function(n,t,o){o.r(t),o.d(t,{default:function(){return y}});var e=o(62230),r=o(98240),i=o(52322),a=o(2784),l=o(73223),s=o(68657),d=o(43560),p=o(63082),u=o(8112),c=o(23263),m=o(9938),v=o(75190),g=o(82740),x=o(87681);function h(){var n=(0,v.Z)(["\n  display: flex;\n  flex-direction: column;\n  .cmc-editor {\n    padding: 0 !important;\n  }\n  .comment-post-item:first-of-type {\n    margin-top: 0;\n    padding-bottom: 16px;\n    border: none;\n    ",";\n    &::after {\n      width: 1px;\n      top: 60px;\n      height: calc(100% - 64px);\n      ",";\n    }\n    .post-content-wrapper {\n      margin-bottom: 12px;\n      ",";\n      .text,\n      .text * {\n        font-size: 14px;\n        line-height: 20px;\n      }\n    }\n    .repost-card-wrapper {\n      border: 1px solid var(--color-light-neutral-4);\n      cursor: initial;\n      pointer-events: none;\n      max-width: 560px;\n    }\n    .post-toolbar {\n      display: none;\n    }\n    .reply-mention {\n      margin-bottom: 12px;\n      ","\n      > span {\n        pointer-events: none;\n        cursor: default;\n        color: var(--color-light-neutral-5) !important;\n        > span {\n          color: var(--color-light-neutral-5) !important;\n        }\n      }\n    }\n  }\n  .post-card__disappeared {\n    margin-bottom: 12px;\n  }\n\n  .cmc-editor {\n    border-bottom: none;\n  }\n"]);return h=function(){return n},n}var f=g.ZP.section.withConfig({componentId:"sc-209726e9-0"})(h(),(0,x.CC)("\n      padding-bottom: 10px;\n    "),(0,x.CC)("\n        top: 40px;\n        left: 16px;\n        height: calc(100% - 48px);\n      "),(0,x.CC)("\n        margin-top: 6px;\n        margin-left: 40px;\n      "),(0,x.CC)("margin-left: 40px;")),y=function(n){var t=n.isOpen,o=n.onClose,v=n.rootPost,g=n.data,x=n.commentDisplay,h=(0,a.useContext)(p.fL),y=h.userInfo,w=h.appName,C=(0,u.$G)().t,b=(0,a.useMemo)((function(){return new c.R6(null===y||void 0===y?void 0:y.username)}),[null===y||void 0===y?void 0:y.username]),j=(0,l.V)(g.textContent,g.originalContent).transformedText;return(0,i.jsx)(d.ZP,{open:t,onClose:o,hideFooter:!0,title:"Reply to @".concat(g.owner.handle),wrapperClassName:"grvt-comment-modal",destroyOnClose:!0,noAutoFocus:!0,bodyStyle:{width:"696px"},children:(0,i.jsxs)(f,{children:[(0,i.jsx)(m.Z,{data:g,showDateBottom:!1,showFollowOption:!0,noFold:!0,showAction:!1,showReplyUser:!0,maxLine:5,shouldShowLinkCard:!1,replyUserPosition:"bottom",renderText:function(){return(0,i.jsx)("div",{className:"text",children:j.map((function(n,t,o){return n.length?(0,i.jsx)("p",{className:"text-content",children:n.map((function(n,t,o){return(0,l.SU)(n)}))},t):(0,i.jsx)("br",{},"br"+t)}))})},onItemClick:function(){},renderSmallPic:!0,onFormatReplyUser:function(n){return(n||[]).concat(g.owner).filter((function(n){return n.guid!==(null===y||void 0===y?void 0:y.guid)}))}},g.gravityId),(0,i.jsx)(s.Z,{postObject:b,autoFocus:!0,getParams:function(n,t){var o=n.text,i=n.processedArray,a=(0,r.Z)(n,["text","processedArray"]);return(0,e.Z)({bullish:1===t||-1!==t&&void 0,content:o,originalContent:JSON.stringify(i),replyToGravityId:g.gravityId,rootId:(null===v||void 0===v?void 0:v.gravityId)||g.rootId,showDirectLinkOnComment:g.gravityId!==(null===v||void 0===v?void 0:v.gravityId),commentDisplay:x},a)},onSuccess:o,placeholder:C("Type your response here",{ns:"gravity"}),editorStyle:{minHeight:100},postText:C("Reply",{ns:"community-editor"}),postingText:C("Replying...",{ns:"community-editor"}),showLinkCard:!1,referSite:"comments_popup",appName:w})]})})}}}]);